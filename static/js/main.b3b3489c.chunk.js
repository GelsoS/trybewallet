(this["webpackJsonpsd-0x-project-trybewallet"]=this["webpackJsonpsd-0x-project-trybewallet"]||[]).push([[0],{39:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},53:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(20),i=a.n(c),l=a(25),o=(a(39),a(12)),u=a(2),s=a(17),d=a(9),p=a(10),h=a(4),m=a(11),b=a(13),v=a(18),f=a(5),E=a(15),y=a(23),j=function(){return fetch("https://economia.awesomeapi.com.br/json/all").then((function(e){return e.json()}))},O=function(e){return{type:"DADOS",payload:e}},g=function(e){return{type:"EDIT",payload:e}},x=(a(44),function(e){Object(m.a)(a,e);var t=Object(b.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).handleChange=e.handleChange.bind(Object(h.a)(e)),e.habilita=e.habilita.bind(Object(h.a)(e)),e.login=e.login.bind(Object(h.a)(e)),e.state={email:"",password:"",habilitar:!0},e}return Object(p.a)(a,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(s.a)({},a,n),this.habilita)}},{key:"habilita",value:function(){var e=this.state,t=e.password,a=e.email,n=new RegExp(/[a-z0-9]+@([\w-]+\.)+[\w-]{2,3}$/i).test(a);t.length>5&&n?this.setState({habilitar:!1}):this.setState({habilitar:!0})}},{key:"login",value:function(){var e=this.props,t=e.usuario,a=e.history.push;t(this.state.email),a("/carteira")}},{key:"render",value:function(){var e=this.state.habilitar;return r.a.createElement("div",null,r.a.createElement("section",{className:"section"},"E-mail:",r.a.createElement("input",{className:"input",name:"email",type:"email","data-testid":"email-input",placeholder:"E-mail",onChange:this.handleChange}),"Senha:",r.a.createElement("input",{className:"input",name:"password",type:"password",placeholder:"Senha","data-testid":"password-input",onChange:this.handleChange}),r.a.createElement("button",{className:"button",type:"button",onClick:this.login,disabled:e},"Entrar")))}}]),a}(r.a.Component)),w=Object(o.b)(null,(function(e){return{usuario:function(t){return e({type:"USER",value:t})}}}))(x),C=(a(45),function(e){Object(m.a)(a,e);var t=Object(b.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props,t=e.info,a=e.allExpenses;return r.a.createElement("div",{className:"div"},r.a.createElement("span",{"data-testid":"email-field"},t),r.a.createElement("section",{className:"moeda"},r.a.createElement("span",{"data-testid":"total-field"},a.reduce((function(e,t){return e+parseFloat(t.value)*parseFloat(t.exchangeRates[t.currency].ask)}),0).toFixed(2)),r.a.createElement("span",{"data-testid":"header-currency-field"},"BRL")))}}]),a}(n.Component)),k=Object(o.b)((function(e){return{info:e.user.email,allExpenses:e.wallet.expenses}}))(C),S=(a(46),function(e){Object(m.a)(a,e);var t=Object(b.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).delete=e.delete.bind(Object(h.a)(e)),e.editItem=e.editItem.bind(Object(h.a)(e)),e}return Object(p.a)(a,[{key:"delete",value:function(e){var t=this.props,a=t.expenses;(0,t.deleteButton)(a.filter((function(t){return t!==e})))}},{key:"editItem",value:function(e){var t=this.props,a=t.expenses;(0,t.salvarId)(a.filter((function(t){return t===e}))[0].id)}},{key:"render",value:function(){var e=this,t=this.props.expenses;return r.a.createElement("table",{border:"1",className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Descri\xe7\xe3o"),r.a.createElement("th",null,"Tag"),r.a.createElement("th",null,"M\xe9todo de pagamento"),r.a.createElement("th",null,"Valor"),r.a.createElement("th",null,"Moeda"),r.a.createElement("th",null,"C\xe2mbio utilizado"),r.a.createElement("th",null,"Valor convertido"),r.a.createElement("th",null,"Moeda de convers\xe3o"),r.a.createElement("th",null,"Editar/Excluir"))),r.a.createElement("tbody",null,t.map((function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,t.description),r.a.createElement("td",null,t.tag),r.a.createElement("td",null,t.method),r.a.createElement("td",null,Number(t.value).toFixed(2)),r.a.createElement("td",null,t.exchangeRates[t.currency].name),r.a.createElement("td",null,Number(t.exchangeRates[t.currency].ask).toFixed(2)),r.a.createElement("td",null,(Number(t.value)*parseFloat(t.exchangeRates[t.currency].ask)).toFixed(2)),r.a.createElement("td",null,t.exchangeRates[t.currency].codein),r.a.createElement("td",null,r.a.createElement("button",{key:Math.random(),onClick:function(){return e.editItem(t)},className:"edit",type:"button","data-testid":"edit-btn"},"Editar"),r.a.createElement("button",{key:t.id,onClick:function(){return e.delete(t)},className:"del",type:"button","data-testid":"delete-btn"},"Excluir")))}))))}}]),a}(n.Component)),D=Object(o.b)((function(e){return{expenses:e.wallet.expenses}}),(function(e){return{deleteButton:function(t){return e({type:"DELL",payload:t})},salvarId:function(t){return e({type:"salvarID",payload:t})}}}))(S),R=(a(47),"Alimenta\xe7\xe3o"),N=function(e){Object(m.a)(a,e);var t=Object(b.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).handleChange=e.handleChange.bind(Object(h.a)(e)),e.limparState=e.limparState.bind(Object(h.a)(e)),e.salvarEdicao=e.salvarEdicao.bind(Object(h.a)(e)),e.state={id:0,value:"",description:"",currency:"USD",method:"Dinheiro",tag:R,exchangeRates:[]},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){(0,this.props.moedaApi)()}},{key:"limparState",value:function(){this.setState((function(e){return{id:e.id+1,value:"",description:"",currency:"USD",method:"Dinheiro",tag:R,exchangeRates:[]}}))}},{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(s.a)({},a,n))}},{key:"salvarEdicao",value:function(){var e=this.state,t=e.value,a=e.description,n=e.currency,r=e.method,c=e.tag,i=this.props,l=i.editor,o=i.edit,u=i.botaoClic,s=i.expenses,d=i.idToEdit,p=s.filter((function(e){return e.id!==d}));l?o({id:Number(d),value:t,description:a,currency:n,method:r,tag:c},p):(u(this.state),this.limparState())}},{key:"render",value:function(){var e=this.state,t=e.value,a=e.description,n=e.currency,c=e.method,i=e.tag,l=this.props,o=l.allCurency,u=l.editor;return r.a.createElement("fieldset",null,"Valor:",r.a.createElement("input",{type:"number","data-testid":"value-input",placeholder:"valor",name:"value",value:t,onChange:this.handleChange}),"Descricao:",r.a.createElement("input",{type:"text","data-testid":"description-input",placeholder:"descricao",name:"description",value:a,onChange:this.handleChange}),"Moeda:",r.a.createElement("select",{"data-testid":"currency-input",label:"moeda",name:"currency",value:n,onChange:this.handleChange},o.map((function(e,t){return r.a.createElement("option",{key:t},e)}))),"Modo de pagamento:",r.a.createElement("select",{label:"pagamento","data-testid":"method-input",name:"method",value:c,onChange:this.handleChange},r.a.createElement("option",null,"Dinheiro"),r.a.createElement("option",null,"Cart\xe3o de cr\xe9dito"),r.a.createElement("option",null,"Cart\xe3o de d\xe9bito")),"Categoria:",r.a.createElement("select",{"data-testid":"tag-input",label:"despesa",name:"tag",value:i,onChange:this.handleChange},r.a.createElement("option",null,"Alimenta\xe7\xe3o"),r.a.createElement("option",null,"Lazer"),r.a.createElement("option",null,"Trabalho"),r.a.createElement("option",null,"Transporte"),r.a.createElement("option",null,"Sa\xfade")),r.a.createElement("button",{className:"add",type:"button",onClick:this.salvarEdicao},u?"Editar despesa":"Adicionar despesa"))}}]),a}(n.Component),I=Object(o.b)((function(e){return{allCurency:e.wallet.currencies,expenses:e.wallet.expenses,exchangeRates:e.wallet.expenses,editor:e.wallet.editor,idToEdit:e.wallet.idToEdit}}),(function(e){return{moedaApi:function(){return e(function(){var e=Object(y.a)(Object(E.a)().mark((function e(t){var a;return Object(E.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j();case 2:a=e.sent,t({type:"API",value:a});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},botaoClic:function(t){return e((a=t,function(){var e=Object(y.a)(Object(E.a)().mark((function e(t){var n,r;return Object(E.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j();case 2:n=e.sent,r=Object(f.a)(Object(f.a)({},a),{},{exchangeRates:n}),t(O(r));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));var a},edit:function(t,a){return e((n=t,r=a,function(){var e=Object(y.a)(Object(E.a)().mark((function e(t){var a,c,i,l,o,u,s,d,p,h;return Object(E.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j();case 2:a=e.sent,c=n.value,i=n.description,l=n.currency,o=n.method,u=n.tag,s=n.id,d={id:s,value:c,description:i,currency:l,method:o,tag:u,exchangeRates:a},p=r.concat(r,d),(h=Object(v.a)(new Set(p))).sort((function(e,t){return e.id-t.id})),t(g(h));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));var n,r}}}))(N),T=function(e){Object(m.a)(a,e);var t=Object(b.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(k,null),r.a.createElement(I,null),r.a.createElement(D,null))}}]),a}(r.a.Component),A=T;var M=function(){return r.a.createElement(u.c,null,r.a.createElement(u.a,{exact:!0,path:"/",component:w}),r.a.createElement(u.a,{path:"/carteira",component:A}))},F=a(14),L=a(33),B=a(34),U={email:""};var z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;return"USER"===t.type?Object(f.a)(Object(f.a)({},e),{},{email:t.value}):e},V={currencies:[],expenses:[],editor:!1,idToEdit:0};var W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"API":return Object(f.a)(Object(f.a)({},e),{},{currencies:Object.keys(t.value).filter((function(e){return"USDT"!==e}))});case"DADOS":return Object(f.a)(Object(f.a)({},e),{},{expenses:[].concat(Object(v.a)(e.expenses),[t.payload])});case"DELL":return{currencies:Object(v.a)(e.currencies),expenses:t.payload};case"EDIT":return{currencies:Object(v.a)(e.currencies),expenses:t.payload,editor:!e.editor,idToEdit:t.payload.id};case"salvarID":return Object(f.a)(Object(f.a)({},e),{},{idToEdit:t.payload,editor:!0});default:return e}},J=Object(F.combineReducers)({user:z,wallet:W}),P=Object(F.createStore)(J,Object(B.composeWithDevTools)(Object(F.applyMiddleware)(L.a)));window.Cypress&&(window.store=P);var $=P;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(l.a,null,r.a.createElement(o.a,{store:$},r.a.createElement(M,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[53,1,2]]]);
//# sourceMappingURL=main.b3b3489c.chunk.js.map